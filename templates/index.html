<!doctype html>
<html lang="pt-BR">
  <head>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css')}}"
    />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>VaBOO - Plataforma de Empregos</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body>
    <!-- Navigation -->
    <header class="w-full bg-white shadow-sm sticky top-0 z-30">
      <div
        class="max-w-7xl mx-auto px-6 py-3 flex items-center justify-between"
      >
        <a href="{{ url_for('index') }}" class="text-2xl font-bold text-[#7C71B2] hover:text-purple-600">
            Vaboo!
        </a>

        <nav>
          <ul class="flex gap-10 text-gray-900 font-semibold select-none">
            <li><a href="#home" class="nav-link active">Home</a></li>
            <li><a href="#jobs" class="nav-link">Vagas</a></li>  
            <li><a href="#about" class="nav-link">Sobre</a></li>
          </ul>
        </nav>
        <a href="{{ url_for('cadastro_empresa') }}" class="btn-primary"
          >Cadastre-se</a
        >
      </div>
    </header>

    <!-- Section: Home -->
    <section id="home" aria-label="Home: Apresenta√ß√£o do VaBOO">
      <div class="left-image">
        <img
          src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/589597a7-5533-4ebf-87a9-054656cbdb0f.png"
          alt="Jovem mulher de neg√≥cios sorridente segurando um laptop, vestindo √≥culos, sobre fundo claro com formas geom√©tricas roxas ao redor"
          loading="lazy"
          onerror="this.style.display='none'"
        />
        <div class="shape shape-big octagon"></div>
        <div class="shape shape-small octagon"></div>
        <div class="shape shape-tiny octagon"></div>
      </div>
      <div class="right-text">
        <h1>T√° em busca<br />de uma Vaga?</h1>
        <p class="subheading">Conhe√ßa a VaBOO!</p>
        <button
          class="btn-hero"
          onclick="document.getElementById('jobs').scrollIntoView({behavior: 'smooth'})"
          aria-label="Ver vagas dispon√≠veis"
        >
          Ver vagas
        </button>
      </div>
    </section>

      <!-- Section: Jobs -->
      <section id="jobs" aria-label="Vagas dispon√≠veis - Carrossel de empresas">
        <div class="relative w-full max-w-4xl">
          <div
            class="cards"
            tabindex="0"
            aria-live="polite"
            aria-label="Lista de vagas das empresas"
          >
            {% for vaga in vagas %}
            <article
              class="card"
              tabindex="0"
              aria-labelledby="title-vaga-{{ vaga.id }}"
            >
              <div class="card-content">
                <h3 id="title-vaga-{{ vaga.id }}" class="text-xl font-bold text-gray-800 mb-2">{{ vaga.titulo }}</h3>
                <p class="text-sm text-purple-600 font-semibold mb-2">üè¢ {{ vaga.empresa_nome }}</p>
                <p class="text-gray-600 mb-3">{{ vaga.descricao }}</p>
                <div class="flex flex-col gap-2">
                  <span class="text-sm text-green-600 font-semibold">üí∞ R$ {{ "{:,.2f}".format(vaga.salario_oferecido) }}</span>
                  <span class="text-sm text-blue-600 font-semibold">üíº {{ vaga.tipo_vaga }}</span>
                  <span class="text-sm text-gray-500">üìç {{ vaga.localizacao }}</span>
                </div>
              </div>
              <div class="card-actions">
                <a
                  href="{{ url_for('detalhes_vaga_publico', vaga_id=vaga.id) }}"
                  class="more-info"
                  tabindex="0"
                  >Saiba mais</a
                >
                <a href="{{ url_for('cadastro_candidato') }}" class="btn-primary" aria-label="Inscrever-se para {{ vaga.titulo }}">
                  Inscreva-se
                </a>
              </div>
            </article>
            {% endfor %}
            
            <!-- Caso n√£o haja vagas -->
            {% if not vagas %}
            <article class="card" tabindex="0">
              <div class="card-content text-center">
                <h3 class="text-xl font-bold text-gray-800 mb-4">Nenhuma vaga dispon√≠vel</h3>
                <p class="text-gray-600 mb-4">No momento n√£o h√° vagas cadastradas na plataforma.</p>
                <p class="text-sm text-purple-600">Volte em breve para ver novas oportunidades!</p>
              </div>
            </article>
            {% endif %}
          </div>
        <button
          class="arrow arrow-right"
          aria-label="Pr√≥ximo"
          onclick="scrollJobs('next')"
        >
          &rarr;
        </button>
        
        <button
          class="arrow arrow-left"
          aria-label="Anterior"
          onclick="scrollJobs('prev')"
        >
          &larr;
        </button>

        </div>
      </section>

      <!-- Section: About -->
      <section id="about" class="max-w-6xl mx-auto mb-16">
          <div class="hero-section p-6 sm:p-8 lg:p-12">
              <div class="flex flex-col lg:flex-row items-center gap-8 lg:gap-12">
                  <div class="flex-1 order-2 lg:order-1">
                      <p class="text-base sm:text-lg leading-relaxed text-gray-700">
                          <em>O <strong class="text-purple-600">Vaboo</strong></em> √© um site de empregos moderno e
                          intuitivo, criado com o prop√≥sito de aproximar empresas e
                          profissionais de forma simples, r√°pida e eficiente.<br />
                          Voltado para quem busca novas oportunidades no mercado de trabalho, a
                          plataforma oferece uma experi√™ncia acess√≠vel tanto para candidatos
                          quanto para recrutadores.<br />
                          Com uma interface amig√°vel e responsiva, o
                          <em><strong class="text-purple-600">Vaboo</strong></em> permite que os usu√°rios encontrem
                          vagas por √°rea, localiza√ß√£o, tipo de trabalho (remoto, h√≠brido ou
                          presencial) e n√≠vel de experi√™ncia.<br />
                          <strong class="text-purple-600"><em>Vaboo</em></strong>: 
                          <strong>conectando talentos √†s melhores oportunidades.</strong>
                      </p>
                  </div>

                  <div class="hero-image flex-1 max-w-sm lg:max-w-md relative order-1 lg:order-2">
                      <img
                          src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/cec3b611-6a12-486a-adee-f40be9bc19af.png"
                          alt="Jovem mulher negra sorridente estendendo a m√£o para cumprimentar"
                          loading="lazy"
                          onerror="this.style.display='none'"
                          class="rounded-full"
                      />
                      <div class="shape shape-big -top-6 -right-6"></div>
                      <div class="shape shape-small bottom-8 right-4"></div>
                      <div class="shape shape-tiny top-12 right-20 opacity-25"></div>
                  </div>
              </div>
          </div>
      </section>

    <script>
      // Menu navigation
      const sections = {
        home: document.getElementById("home"),
        jobs: document.getElementById("jobs"),
        about: document.getElementById("about"),
      };

      const navLinks = document.querySelectorAll("nav a.nav-link");

      function setActiveLink(hash) {
        navLinks.forEach((link) => {
          if (link.getAttribute("href") === hash) {
            link.classList.add("active");
            link.setAttribute("aria-current", "page");
          } else {
            link.classList.remove("active");
            link.removeAttribute("aria-current");
          }
        });
      }

      navLinks.forEach((link) => {
        link.addEventListener("click", (e) => {
          e.preventDefault();
          const target = link.getAttribute("href");
          document.querySelector(target).scrollIntoView({ behavior: "smooth" });
          setActiveLink(target);
          history.pushState(null, "", target);
        });
      });

      window.addEventListener("load", () => {
        let hash = window.location.hash || "#home";
        setActiveLink(hash);
      });

      // Jobs carousel - Responsivo baseado no tamanho da tela
      function scrollJobs(direction) {
        const cardsContainer = document.querySelector("#jobs .cards");
        const card = cardsContainer.querySelector(".card");
        if (!card) return;
        
        const cardWidth = card.offsetWidth;
        const gap = 24; // 1.5rem em px
        const containerWidth = cardsContainer.clientWidth;
        
        // Calcular quantos cards s√£o vis√≠veis
        const visibleCards = Math.floor((containerWidth + gap) / (cardWidth + gap));
        const scrollAmount = (cardWidth + gap) * Math.max(1, visibleCards);
        
        if (direction === "next") {
          cardsContainer.scrollBy({ left: scrollAmount, behavior: "smooth" });
        } else if (direction === "prev") {
          cardsContainer.scrollBy({ left: -scrollAmount, behavior: "smooth" });
        }
      }

      // Add keyboard navigation for carousel
      document.addEventListener("keydown", (e) => {
        const focusedElement = document.activeElement;
        if (focusedElement && focusedElement.closest("#jobs")) {
          if (e.key === "ArrowRight") {
            e.preventDefault();
            scrollJobs("next");
          } else if (e.key === "ArrowLeft") {
            e.preventDefault();
            scrollJobs("prev");
          }
        }
      });

      // Form submission (if needed)
      const form = document.getElementById("create-account-form");
      if (form) {
        form.addEventListener("submit", async (event) => {
          event.preventDefault();

          const formData = new FormData(form);
          let data = Object.fromEntries(formData.entries());
          data.pretensao_salarial = parseFloat(data.pretensao_salarial);

          if (data.senha !== data.confirmar_senha) {
            alert("As senhas n√£o coincidem!");
            return;
          }

          try {
            const response = await fetch("/auth/register", {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify(data),
            });

            const result = await response.json();
            if (response.status === 201) {
              alert("Cadastro realizado com sucesso!");
              form.reset();
            } else {
              alert(result.msg || "Erro ao cadastrar!");
            }
          } catch (error) {
            console.error(error);
            alert("Erro ao se conectar com o servidor!");
          }
        });
      }
    </script>
  </body>
</html>