{% extends "base.html" %}

{% block title %}Editar Vaga{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='style/editar_vaga.css') }}">


<div class="container">
    <div class="form-container">
        <!-- Header -->
        <div class="header">
            <div class="icon-container">
                <img src="{{ url_for('static', filename='/img/pencil.png') }}" class="emojis">
            </div>
            <div>
                <h1 class="title">
                    Editar Vaga
                </h1>
                <p class="description">Atualize as informa√ß√µes da vaga</p>
            </div>
        </div>

        <form method="POST" class="form">
            <!-- T√≠tulo da Vaga -->
            <div class="input-group">
                <label for="titulo" class="input-label">
                    <img src="{{ url_for('static', filename='/img/edit.png') }}" class="emojis"> T√≠tulo da Vaga *
                </label>
                <input type="text" id="titulo" name="titulo" value="{{ vaga.titulo }}" required
                       class="input-field"
                       placeholder="Ex: Desenvolvedor Python S√™nior">
            </div>

            <!-- Descri√ß√£o -->
            <div class="input-group">
                <label for="descricao" class="input-label">
                    <img src="{{ url_for('static', filename='/img/report.png') }}" class="emojis"> Descri√ß√£o da Vaga *
                </label>
                <textarea id="descricao" name="descricao" rows="4" required
                          class="input-field"
                          placeholder="Descreva as principais responsabilidades e atividades...">{{ vaga.descricao }}</textarea>
            </div>

            <!-- Requisitos -->
            <div class="input-group">
                <label for="requisitos" class="input-label">
                    <img src="{{ url_for('static', filename='/img/alvo.png') }}" class="emojis"> Requisitos *
                </label>
                <textarea id="requisitos" name="requisitos" rows="4" required
                          class="input-field"
                          placeholder="Liste os requisitos obrigat√≥rios e desej√°veis...">{{ vaga.requisitos }}</textarea>
            </div>

            <!-- Sal√°rio e Tipo -->
            <div class="two-column-layout">
                <div>
                    <label for="salario_oferecido" class="input-label">
                        <img src="{{ url_for('static', filename='/img/money.png') }}" class="emojis"> Sal√°rio Oferecido (R$) *
                    </label>
                    <input type="number" id="salario_oferecido" name="salario_oferecido" step="0.01" 
                           value="{{ vaga.salario_oferecido }}" required
                           class="input-field"
                           placeholder="5000.00">
                </div>

                <div>
                    <label for="tipo_vaga" class="input-label">
                        <img src="{{ url_for('static', filename='/img/job.png') }}" class="emojis"> Modalidade de Trabalho *
                    </label>
                    <select id="tipo_vaga" name="tipo_vaga" required
                            class="input-field">
                        <option value="Presencial" {% if vaga.tipo_vaga == 'Presencial' %}selected{% endif %}>üè¢ Presencial</option>
                        <option value="Remota" {% if vaga.tipo_vaga == 'Remota' %}selected{% endif %}>üè† Remota</option>
                        <option value="H√≠brida" {% if vaga.tipo_vaga == 'H√≠brida' %}selected{% endif %}>üîÑ H√≠brida</option>
                    </select>
                </div>
            </div>

            <!-- Categoria -->
            <div class="two-column-layout">
                <div>
                    <label for="categoria_id" class="input-label">
                        <img src="{{ url_for('static', filename='/img/tag.png') }}" class="emojis"> Categoria
                    </label>
                    <select id="categoria_id" name="categoria_id"
                            class="input-field">
                        <option value="">Selecione uma categoria</option>
                        {% for categoria in categorias %}
                        <option value="{{ categoria.id }}" 
                                {% if vaga.categoria_id == categoria.id %}selected{% endif %}>
                            {{ categoria.nome }}
                        </option>
                        {% endfor %}
                        <option value="nova">‚ûï Criar nova categoria</option>
                    </select>
                </div>

                <div id="nova-categoria-div" class="nova-categoria-div">
                    <label for="nova_categoria" class="input-label">
                        ‚ú® Nova Categoria
                    </label>
                    <input type="text" id="nova_categoria" name="nova_categoria"
                           class="input-field"
                           placeholder="Nome da nova categoria">
                </div>
            </div>

            <!-- Urg√™ncia -->
            <div>
                <label for="urgencia_contratacao" class="input-label">
                    <img src="{{ url_for('static', filename='/img/urgencia.png') }}" class="emojis"> Urg√™ncia de Contrata√ß√£o
                </label>
                <select id="urgencia_contratacao" name="urgencia_contratacao"
                        class="input-field">
                    <option value="" {% if not vaga.urgencia_contratacao %}selected{% endif %}>N√£o especificada</option>
                    <option value="Baixa" {% if vaga.urgencia_contratacao == 'Baixa' %}selected{% endif %}>üü¢ Baixa</option>
                    <option value="M√©dia" {% if vaga.urgencia_contratacao == 'M√©dia' %}selected{% endif %}>üü° M√©dia</option>
                    <option value="Alta" {% if vaga.urgencia_contratacao == 'Alta' %}selected{% endif %}>üü† Alta</option>
                    <option value="Urgente" {% if vaga.urgencia_contratacao == 'Urgente' %}selected{% endif %}>üî¥ Urgente</option>
                </select>
            </div>

            <!-- Localiza√ß√£o -->
            <div class="localizacao-container">
                <h3 class="localizacao-title">
                    <img src="{{ url_for('static', filename='/img/maps.png') }}" class="emojis"> Localiza√ß√£o da Vaga
                </h3>

                <div class="checkbox-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="usar_endereco_empresa" name="usar_endereco_empresa" 
                               {% if vaga.usar_endereco_empresa %}checked{% endif %}
                               class="checkbox-input">
                        <span class="checkbox-text"><img src="{{ url_for('static', filename='/img/job.png') }}" class="emojis"> Usar endere√ßo da empresa</span>
                    </label>
                </div>

                <div class="two-column-layout">
                    <div>
                        <label for="localizacao_endereco" class="input-label">
                            Endere√ßo
                        </label>
                        <input type="text" id="localizacao_endereco" name="localizacao_endereco" 
                               value="{{ vaga.localizacao_endereco or '' }}"
                               class="input-field"
                               placeholder="Rua, Av, etc.">
                    </div>

                    <div>
                        <label for="localizacao_cidade" class="input-label">
                            Cidade
                        </label>
                        <input type="text" id="localizacao_cidade" name="localizacao_cidade" 
                               value="{{ vaga.localizacao_cidade or '' }}"
                               class="input-field"
                               placeholder="S√£o Paulo">
                    </div>

                    <div>
                        <label for="localizacao_estado" class="input-label">
                            Estado
                        </label>
                        <input type="text" id="localizacao_estado" name="localizacao_estado" 
                               value="{{ vaga.localizacao_estado or '' }}"
                               class="input-field"
                               placeholder="SP">
                    </div>

                    <div>
                        <label for="localizacao_cep" class="input-label">
                            CEP
                        </label>
                        <input type="text" id="localizacao_cep" name="localizacao_cep" 
                               value="{{ vaga.localizacao_cep or '' }}"
                               class="input-field"
                               placeholder="00000-000">
                    </div>
                </div>
            </div>

            <!-- Diferenciais -->
            <div>
                <label for="diferenciais" class="input-label">
                    <img src="{{ url_for('static', filename='/img/diferente.png') }}" class="emojis"> Diferenciais (Opcional)
                </label>
                <textarea id="diferenciais" name="diferenciais" rows="3"
                          class="input-field"
                          placeholder="Benef√≠cios, certifica√ß√µes desej√°veis, idiomas, etc.">{{ vaga.diferenciais or '' }}</textarea>
            </div>

            <!-- Data de Congelamento -->
            <div>
                <label for="data_congelamento_agendado" class="input-label">
                    <img src="{{ url_for('static', filename='/img/calendar.png') }}" class="emojis"> Data de Congelamento Agendado (Opcional)
                </label>
                <input type="date" id="data_congelamento_agendado" name="data_congelamento_agendado" 
                       value="{{ vaga.data_congelamento_agendado.strftime('%Y-%m-%d') if vaga.data_congelamento_agendado else '' }}"
                       min="{{ datetime.now().strftime('%Y-%m-%d') }}"
                       class="input-field">
                <p class="info-text">A vaga ser√° automaticamente congelada nesta data</p>
            </div>

            <!-- Bot√µes -->
            <div class="button-group">
                <button type="submit" 
                        class="submit-button">
                    <img src="{{ url_for('static', filename='/img/confirm.png') }}" class="emojis"> Atualizar Vaga
                </button>
                <a href="{{ url_for('vagas.dashboard_empresa') }}" 
                   class="cancel-button">
                    <img src="{{ url_for('static', filename='/img/cancel.png') }}" class="emojis"> Cancelar
                </a>
            </div>
        </form>
    </div>
</div>

<script src="/static/script/empresa/vaga.js"></script>
{% endblock %}
