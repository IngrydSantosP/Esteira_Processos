<!-- Filtros e Busca -->
<link rel="stylesheet" href="{{ url_for('static', filename='style/vagas.css') }}">

<div class="filter-search-container">
    <div class="filter-search-box">
        <div class="filter-search-flex">
            <!-- Filtros -->
            <div class="filter-buttons">
                <button onclick="filtrarVagas('todas')" class="filter-btn active-filter">
                    Todas ({{ vagas|length if vagas else 0 }})
                </button>
                <button onclick="filtrarVagas('Ativa')" class="filter-btn">
                    Ativas ({{ vagas|selectattr('status', 'equalto', 'Ativa')|list|length if vagas else 0 }})
                </button>
                <button onclick="filtrarVagas('Congelada')" class="filter-btn">
                    Congeladas ({{ vagas|selectattr('status', 'equalto', 'Congelada')|list|length if vagas else 0 }})
                </button>
                <button onclick="filtrarVagas('Concluída')" class="filter-btn">
                    Concluídas ({{ vagas|selectattr('status', 'equalto', 'Concluída')|list|length if vagas else 0 }})
                </button>
            </div>

            <div class="create-job-flex">
                <a href="{{ url_for('vagas.criar_vaga') }}" class="create-job-btn">
                    <span class="create-job-icon">➕</span>
                </a>

                <!-- Botão Busca Inteligente -->
                <div class="search-btn-container">
                    <button id="toggleSearchBtn" onclick="toggleAdvancedSearch()" class="search-btn">
                        <span id="searchIcon" class="search-icon">🔍</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Painel de Busca Avançada (inicialmente oculto) -->
        <div id="advancedSearchPanel" class="advanced-search-panel hidden">
            <div class="search-fields-container">
                <div class="search-field">
                    <label class="search-label">🔍 Palavra-chave</label>
                    <input type="text" id="searchKeyword" placeholder="Ex: desenvolvedor, vendas..." class="search-input">
                </div>

                <div class="search-field">
                    <label class="search-label">📊 Status</label>
                    <select id="searchStatus" class="search-input">
                        <option value="">Todos os status</option>
                        <option value="Ativa">Ativa</option>
                        <option value="Congelada">Congelada</option>
                        <option value="Concluída">Concluída</option>
                    </select>
                </div>

                <div class="search-field">
                    <label class="search-label">⚡ Urgência</label>
                    <select id="searchUrgency" class="search-input">
                        <option value="">Qualquer urgência</option>
                        <option value="Imediata">Imediata</option>
                        <option value="Em até 30 dias">Em até 30 dias</option>
                        <option value="Sem urgência">Sem urgência</option>
                    </select>
                </div>

                <div class="search-field">
                    <label class="search-label">👥 Candidatos</label>
                    <select id="searchCandidatos" class="search-input">
                        <option value="">Qualquer quantidade</option>
                        <option value="sem_candidatos">Sem candidatos</option>
                        <option value="poucos_candidatos">1-5 candidatos</option>
                        <option value="muitos_candidatos">5+ candidatos</option>
                    </select>
                </div>
            </div>

            <div class="search-actions">
                <button onclick="realizarBuscaVagas()" class="search-action-btn">
                    <span class="search-action-icon">🔍</span>
                    Buscar Vagas
                </button>
                <button onclick="limparFiltrosBusca()" class="clear-filters-btn">
                    <span>🧹</span>
                    Limpar Filtros
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Lista de Vagas -->
{% include 'partials/lista_vagas.html' %}
