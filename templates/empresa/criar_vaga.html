{% extends "base.html" %}

{% block title %}Criar Vaga{% endblock %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50">
    <!-- Header -->
    <div class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-12 h-12 bg-gradient-to-r from-green-500 to-emerald-500 rounded-xl flex items-center justify-center">
                        <span class="text-white font-bold text-lg">‚ûï</span>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent">
                            Criar Nova Vaga
                        </h1>
                        <p class="text-gray-500 text-sm">Cadastre uma nova oportunidade de trabalho</p>
                    </div>
                </div>
                <a href="{{ url_for('dashboard_empresa') }}"
                   class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-xl transition-all duration-300 flex items-center gap-2">
                    <span>‚¨ÖÔ∏è</span>
                    Voltar ao Dashboard
                </a>
            </div>
        </div>
    </div>

    <div class="max-w-5xl mx-auto px-4 py-8">
        <!-- Progress Indicator -->
        <div class="bg-white rounded-2xl p-6 shadow-sm border border-gray-100 mb-8">
            <div class="flex items-center justify-center space-x-4">
                <div class="flex items-center cursor-pointer transition-all duration-300 hover:scale-105" onclick="mostrarSecao(1)" id="step-1">
                    <div class="w-10 h-10 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-full flex items-center justify-center font-bold text-sm shadow-lg">1</div>
                    <span class="ml-3 text-sm font-medium text-green-600">Informa√ß√µes Essenciais</span>
                </div>
                <div class="w-12 h-1 bg-green-300 rounded-full" id="progress-1"></div>
                <div class="flex items-center cursor-pointer transition-all duration-300 hover:scale-105" onclick="mostrarSecao(2)" id="step-2">
                    <div class="w-10 h-10 bg-gray-300 text-gray-500 rounded-full flex items-center justify-center font-bold text-sm">2</div>
                    <span class="ml-3 text-sm font-medium text-gray-500">Requisitos e Descri√ß√£o</span>
                </div>
                <div class="w-12 h-1 bg-gray-300 rounded-full" id="progress-2"></div>
                <div class="flex items-center cursor-pointer transition-all duration-300 hover:scale-105" onclick="mostrarSecao(3)" id="step-3">
                    <div class="w-10 h-10 bg-gray-300 text-gray-500 rounded-full flex items-center justify-center font-bold text-sm">3</div>
                    <span class="ml-3 text-sm font-medium text-gray-500">Score Personalizado</span>
                </div>
            </div>
        </div>

        <form method="POST" class="space-y-8">
            <!-- Se√ß√£o 1: Informa√ß√µes Essenciais -->
            <div id="secao-1" class="bg-white rounded-2xl p-6 shadow-sm border border-gray-100">
                <div class="flex items-center gap-4 mb-6">
                    <div class="w-16 h-16 bg-gradient-to-br from-green-100 to-emerald-100 rounded-2xl flex items-center justify-center">
                        <span class="text-3xl">üìã</span>
                    </div>
                    <div>
                        <h2 class="text-xl font-bold text-gray-800">Informa√ß√µes Essenciais</h2>
                        <p class="text-gray-500">Dados fundamentais da vaga</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-grid-cols-2 gap-6">
                    <div class="md:col-span-2">
                        <label for="titulo" class="block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-1">
                            <span>üíº</span> T√≠tulo da Vaga *
                        </label>
                        <input type="text" id="titulo" name="titulo" required
                               class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"
                               placeholder="Ex: Desenvolvedor Full Stack S√™nior">
                    </div>

                    <div>
                        <label for="salario_oferecido" class="block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-1">
                            <span>üí∞</span> Sal√°rio Oferecido (R$) *
                        </label>
                        <input type="number" id="salario_oferecido" name="salario_oferecido" required step="0.01" min="0"
                               class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"
                               placeholder="Ex: 8500.00">
                    </div>

                    <div>
                        <label for="nivel_experiencia" class="block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-1">
                            <span>üìà</span> N√≠vel de Experi√™ncia *
                        </label>
                        <select id="nivel_experiencia" name="nivel_experiencia" required
                                class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent">
                            <option value="">Selecione o n√≠vel</option>
                            <option value="Estagi√°rio">üéì Estagi√°rio</option>
                            <option value="J√∫nior">üå± J√∫nior (0-2 anos)</option>
                            <option value="Pleno">üå≥ Pleno (3-5 anos)</option>
                            <option value="S√™nior">üöÄ S√™nior (5+ anos)</option>
                            <option value="Especialista">üí° Especialista</option>
                        </select>
                    </div>

                    <div>
                        <label for="tipo_vaga" class="block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-1">
                            <span>üè†</span> Modalidade de Trabalho *
                        </label>
                        <select id="tipo_vaga" name="tipo_vaga" required
                                class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"
                                onchange="toggleEnderecoField()">
                            <option value="">Selecione a modalidade</option>
                            <option value="Presencial">üè¢ Presencial</option>
                            <option value="Remoto">üè† Remoto</option>
                            <option value="H√≠brida">üîÑ H√≠brida</option>
                        </select>
                    </div>

                    <div>
                        <label for="regime_contratacao" class="block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-1">
                            <span>ü§ù</span> Regime de Contrata√ß√£o *
                        </label>
                        <select id="regime_contratacao" name="regime_contratacao" required
                                class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent">
                            <option value="">Selecione o regime</option>
                            <option value="CLT">üìú CLT</option>
                            <option value="PJ">üíº PJ</option>
                            <option value="Est√°gio">üìö Est√°gio</option>
                            <option value="Freelancer">üí∞ Freelancer</option>
                        </select>
                    </div>

                    <!-- Campos de Localiza√ß√£o (condicionais) -->
                    <div id="endereco_container" class="md:col-span-2 hidden">
                        <div class="bg-blue-50 rounded-xl p-4 border border-blue-200 mb-4">
                            <label class="flex items-center space-x-3 cursor-pointer">
                                <input type="checkbox" id="usar_endereco_empresa" name="usar_endereco_empresa" 
                                       class="w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"
                                       onchange="toggleEnderecoEmpresa()">
                                <span class="text-sm font-semibold text-gray-700 flex items-center gap-1">
                                    <span>üè¢</span> Usar endere√ßo da empresa
                                </span>
                            </label>
                        </div>

                        <div id="campos_endereco_vaga" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="md:col-span-2">
                                <label for="localizacao_endereco" class="block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-1">
                                    <span>üìç</span> Endere√ßo Completo *
                                </label>
                                <input type="text" id="localizacao_endereco" name="localizacao_endereco"
                                       class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                       placeholder="Ex: Av. Paulista, 1000, Conj. 101">
                            </div>

                            <div>
                                <label for="localizacao_cidade" class="block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-1">
                                    <span>üåÜ</span> Cidade *
                                </label>
                                <input type="text" id="localizacao_cidade" name="localizacao_cidade"
                                       class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                       placeholder="Ex: S√£o Paulo">
                            </div>

                            <div>
                                <label for="localizacao_estado" class="block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-1">
                                    <span>üó∫Ô∏è</span> Estado *
                                </label>
                                <select id="localizacao_estado" name="localizacao_estado"
                                        class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="">Selecione o estado</option>
                                    <option value="SP">S√£o Paulo</option>
                                    <option value="RJ">Rio de Janeiro</option>
                                    <option value="MG">Minas Gerais</option>
                                    <option value="RS">Rio Grande do Sul</option>
                                    <option value="PR">Paran√°</option>
                                    <option value="SC">Santa Catarina</option>
                                    <option value="BA">Bahia</option>
                                    <option value="GO">Goi√°s</option>
                                    <option value="PE">Pernambuco</option>
                                    <option value="CE">Cear√°</option>
                                    <option value="DF">Distrito Federal</option>
                                    <option value="ES">Esp√≠rito Santo</option>
                                    <option value="MT">Mato Grosso</option>
                                    <option value="MS">Mato Grosso do Sul</option>
                                    <option value="PA">Par√°</option>
                                    <option value="PB">Para√≠ba</option>
                                    <option value="AM">Amazonas</option>
                                    <option value="RN">Rio Grande do Norte</option>
                                    <option value="AL">Alagoas</option>
                                    <option value="PI">Piau√≠</option>
                                    <option value="AC">Acre</option>
                                    <option value="AP">Amap√°</option>
                                    <option value="RO">Rond√¥nia</option>
                                    <option value="RR">Roraima</option>
                                    <option value="SE">Sergipe</option>
                                    <option value="TO">Tocantins</option>
                                    <option value="MA">Maranh√£o</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div>
                        <label for="categoria_id" class="block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-1">
                            <span>üè∑Ô∏è</span> Categoria da Vaga
                        </label>
                        <select id="categoria_id" name="categoria_id"
                                class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"
                                onchange="toggleNovaCategoria()">
                            <option value="">Selecione uma categoria</option>
                            {% for categoria in categorias %}
                            <option value="{{ categoria.id }}">{{ categoria.nome }}</option>
                            {% endfor %}
                            <option value="nova">‚ú® Adicionar nova categoria</option>
                        </select>
                    </div>

                    <div>
                        <label for="urgencia_contratacao" class="block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-1">
                            <span>‚ö°</span> Urg√™ncia da Contrata√ß√£o
                        </label>
                        <select id="urgencia_contratacao" name="urgencia_contratacao"
                                class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent">
                            <option value="">Selecione a urg√™ncia</option>
                            <option value="Imediata">üö® Imediata</option>
                            <option value="Em at√© 30 dias">‚è∞ Em at√© 30 dias</option>
                            <option value="Em at√© 60 dias">üìÖ Em at√© 60 dias</option>
                            <option value="Sem urg√™ncia">üïê Sem urg√™ncia</option>
                        </select>
                    </div>

                    <div id="nova_categoria_container" class="md:col-span-2 hidden">
                        <label for="nova_categoria" class="block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-1">
                            <span>‚ú®</span> Nova Categoria
                        </label>
                        <input type="text" id="nova_categoria" name="nova_categoria"
                               class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent"
                               placeholder="Ex: Intelig√™ncia Artificial">
                    </div>
                </div>
            </div>

            <!-- Se√ß√£o 2: Requisitos e Descri√ß√£o -->
            <div id="secao-2" class="bg-white rounded-2xl p-6 shadow-sm border border-gray-100 hidden">
                <div class="flex items-center gap-4 mb-6">
                    <div class="w-16 h-16 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-2xl flex items-center justify-center">
                        <span class="text-3xl">üìù</span>
                    </div>
                    <div>
                        <h2 class="text-xl font-bold text-gray-800">Requisitos e Descri√ß√£o</h2>
                        <p class="text-gray-500">Defina o que procura no candidato ideal</p>
                    </div>
                </div>

                <div class="space-y-6">
                    <div>
                        <label for="descricao" class="block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-1">
                            <span>üìÑ</span> Descri√ß√£o da Vaga *
                        </label>
                        <textarea id="descricao" name="descricao" required rows="4"
                                  class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"
                                  placeholder="Descreva as principais responsabilidades, benef√≠cios e ambiente de trabalho..."></textarea>
                        <div class="mt-1 text-xs text-gray-500 flex items-center gap-1">
                            <span>üí°</span> Seja claro e objetivo para atrair candidatos qualificados
                        </div>
                    </div>

                    <div>
                        <label for="requisitos" class="block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-1">
                            <span>‚ö°</span> Requisitos Obrigat√≥rios *
                        </label>
                        <textarea id="requisitos" name="requisitos" required rows="4"
                                  class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"
                                  placeholder="Liste as habilidades t√©cnicas, experi√™ncias e qualifica√ß√µes essenciais..."></textarea>
                        <div class="mt-1 text-xs text-gray-500 flex items-center gap-1">
                            <span>üéØ</span> Foque apenas no que √© realmente indispens√°vel
                        </div>
                    </div>

                    <div>
                        <label for="diferenciais" class="block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-1">
                            <span>üåü</span> Diferenciais Desej√°veis
                        </label>
                        <textarea id="diferenciais" name="diferenciais" rows="3"
                                  class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"
                                  placeholder="Ex: Ingl√™s fluente, certifica√ß√µes, experi√™ncia com metodologias √°geis..."></textarea>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="formacao_minima" class="block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-1">
                                <span>üéì</span> Forma√ß√£o M√≠nima *
                            </label>
                            <select id="formacao_minima" name="formacao_minima" required
                                    class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="">Selecione a forma√ß√£o</option>
                                <option value="Ensino Fundamental">Ensino Fundamental</option>
                                <option value="Ensino M√©dio">Ensino M√©dio</option>
                                <option value="T√©cnico">T√©cnico</option>
                                <option value="Gradua√ß√£o">Gradua√ß√£o</option>
                                <option value="P√≥s-gradua√ß√£o">P√≥s-gradua√ß√£o</option>
                            </select>
                        </div>

                        <div>
                            <label for="carga_horaria" class="block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-1">
                                <span>‚è±Ô∏è</span> Carga Hor√°ria *
                            </label>
                            <select id="carga_horaria" name="carga_horaria" required
                                    class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="">Selecione a carga hor√°ria</option>
                                <option value="20h">20h semanais</option>
                                <option value="30h">30h semanais</option>
                                <option value="40h">40h semanais</option>
                                <option value="44h">44h semanais</option>
                                <option value="Flex√≠vel">üîÑ Flex√≠vel</option>
                            </select>
                        </div>
                    </div>

                    <div>
                        <label for="beneficios" class="block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-1">
                            <span>üéÅ</span> Principais Benef√≠cios
                        </label>
                        <textarea id="beneficios" name="beneficios" rows="2"
                                  class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"
                                  placeholder="Ex: Vale alimenta√ß√£o, plano de sa√∫de, home office flex√≠vel..."></textarea>
                    </div>
                </div>
            </div>

            <!-- Se√ß√£o 3: Metodologia de Score -->
            <div id="secao-3" class="bg-white rounded-2xl p-6 shadow-sm border border-gray-100 hidden">
                <div class="flex items-center gap-4 mb-6">
                    <div class="w-16 h-16 bg-gradient-to-br from-purple-100 to-pink-100 rounded-2xl flex items-center justify-center">
                        <span class="text-3xl">üéØ</span>
                    </div>
                    <div>
                        <h2 class="text-xl font-bold text-gray-800">Metodologia de Score</h2>
                        <p class="text-gray-500">Configure como os candidatos ser√£o avaliados</p>
                    </div>
                </div>

                <!-- Template de Score -->
                <div class="mb-6">
                    <label class="block text-sm font-semibold text-gray-700 mb-3 flex items-center gap-1">
                        <span>üéõÔ∏è</span> Template de Avalia√ß√£o
                    </label>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <select id="template_score" name="template_score" 
                                class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                                onchange="aplicarTemplateScore()">
                            <option value="">Selecione um template</option>
                            <option value="equilibrado">‚öñÔ∏è Padr√£o Equilibrado</option>
                            <option value="tecnico">üíª Foco T√©cnico</option>
                            <option value="startup">üöÄ Startup Flex√≠vel</option>
                            <option value="tradicional">üè¢ Empresa Tradicional</option>
                            <option value="remoto">üè† Remoto First</option>
                            <option value="vendas">üìä Vendas & Relacionamento</option>
                            <option value="gestao">üëî Gest√£o & Lideran√ßa</option>
                            <option value="personalizado">‚öôÔ∏è Personalizado</option>
                        </select>
                        <button type="button" onclick="resetarPesos()" 
                                class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-3 rounded-xl font-semibold transition-all duration-300 flex items-center justify-center gap-2">
                            <span>üîÑ</span> Resetar
                        </button>
                    </div>
                </div>

                <!-- Configura√ß√£o de Pesos -->
                <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 border border-purple-200">
                    <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2">
                        <span>‚öñÔ∏è</span> Distribui√ß√£o de Pesos (Total: <span id="total-peso">100</span>%)
                    </h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="space-y-4">
                            <div>
                                <label for="peso_salarial" class="block text-sm font-semibold text-gray-700 mb-2 flex items-center justify-between">
                                    <span class="flex items-center gap-1">üí∞ Expectativa Salarial</span>
                                    <span class="text-purple-600 font-bold"><span id="valor_salarial">20</span>%</span>
                                </label>
                                <input type="range" id="peso_salarial" name="peso_salarial" min="0" max="50" value="20" 
                                       class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer range-purple"
                                       oninput="atualizarPeso('salarial', this.value)">
                            </div>

                            <div>
                                <label for="peso_requisitos" class="block text-sm font-semibold text-gray-700 mb-2 flex items-center justify-between">
                                    <span class="flex items-center gap-1">‚ö° Requisitos T√©cnicos</span>
                                    <span class="text-purple-600 font-bold"><span id="valor_requisitos">40</span>%</span>
                                </label>
                                <input type="range" id="peso_requisitos" name="peso_requisitos" min="0" max="60" value="40" 
                                       class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer range-purple"
                                       oninput="atualizarPeso('requisitos', this.value)">
                            </div>

                            <div>
                                <label for="peso_experiencia" class="block text-sm font-semibold text-gray-700 mb-2 flex items-center justify-between">
                                    <span class="flex items-center gap-1">üìà Experi√™ncia</span>
                                    <span class="text-purple-600 font-bold"><span id="valor_experiencia">15</span>%</span>
                                </label>
                                <input type="range" id="peso_experiencia" name="peso_experiencia" min="0" max="40" value="15" 
                                       class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer range-purple"
                                       oninput="atualizarPeso('experiencia', this.value)">
                            </div>
                        </div>

                        <div class="space-y-4">
                            <div>
                                <label for="peso_diferenciais" class="block text-sm font-semibold text-gray-700 mb-2 flex items-center justify-between">
                                    <span class="flex items-center gap-1">üåü Diferenciais</span>
                                    <span class="text-purple-600 font-bold"><span id="valor_diferenciais">10</span>%</span>
                                </label>
                                <input type="range" id="peso_diferenciais" name="peso_diferenciais" min="0" max="30" value="10" 
                                       class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer range-purple"
                                       oninput="atualizarPeso('diferenciais', this.value)">
                            </div>

                            <div>
                                <label for="peso_localizacao" class="block text-sm font-semibold text-gray-700 mb-2 flex items-center justify-between">
                                    <span class="flex items-center gap-1">üìç Localiza√ß√£o</span>
                                    <span class="text-purple-600 font-bold"><span id="valor_localizacao">10</span>%</span>
                                </label>
                                <input type="range" id="peso_localizacao" name="peso_localizacao" min="0" max="25" value="10" 
                                       class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer range-purple"
                                       oninput="atualizarPeso('localizacao', this.value)">
                            </div>

                            <div>
                                <label for="peso_formacao" class="block text-sm font-semibold text-gray-700 mb-2 flex items-center justify-between">
                                    <span class="flex items-center gap-1">üéì Forma√ß√£o</span>
                                    <span class="text-purple-600 font-bold"><span id="valor_formacao">5</span>%</span>
                                </label>
                                <input type="range" id="peso_formacao" name="peso_formacao" min="0" max="25" value="5" 
                                       class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer range-purple"
                                       oninput="atualizarPeso('formacao', this.value)">
                            </div>
                        </div>
                    </div>

                    <!-- Indicador Visual -->
                    <div class="mt-6">
                        <div class="bg-white rounded-lg p-4 border border-gray-200">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-sm font-medium text-gray-700">Total dos Pesos:</span>
                                <span id="status-peso" class="text-sm font-bold text-green-600">‚úÖ V√°lido (100%)</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-3">
                                <div id="barra-progresso" class="bg-gradient-to-r from-purple-500 to-pink-500 h-3 rounded-full transition-all duration-300" style="width: 100%"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Explica√ß√£o -->
                    <div class="mt-4 bg-blue-50 rounded-lg p-4 border border-blue-200">
                        <h4 class="text-sm font-bold text-blue-800 mb-2 flex items-center gap-1">
                            <span>üí°</span> Como funciona o score:
                        </h4>
                        <ul class="text-xs text-blue-700 space-y-1">
                            <li>‚Ä¢ <strong>Expectativa Salarial:</strong> Compatibilidade entre pretens√£o do candidato e sal√°rio oferecido</li>
                            <li>‚Ä¢ <strong>Requisitos T√©cnicos:</strong> Alinhamento do perfil com habilidades exigidas</li>
                            <li>‚Ä¢ <strong>Experi√™ncia:</strong> Anos de experi√™ncia e senioridade do candidato</li>
                            <li>‚Ä¢ <strong>Diferenciais:</strong> Habilidades extras que agregam valor (certifica√ß√µes, idiomas)</li>
                            <li>‚Ä¢ <strong>Localiza√ß√£o:</strong> Proximidade geogr√°fica (para vagas presenciais)</li>
                            <li>‚Ä¢ <strong>Forma√ß√£o:</strong> N√≠vel educacional compat√≠vel com a vaga</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Navega√ß√£o -->
            <div class="flex justify-between items-center" id="sectionNavigation">
                <button type="button" onclick="secaoAnterior()" id="btnAnterior"
                        class="bg-gray-500 hover:bg-gray-600 text-white py-3 px-6 rounded-xl font-semibold transition-all duration-300 flex items-center gap-2" 
                        style="display: none;">
                    <span>‚¨ÖÔ∏è</span> Anterior
                </button>
                <div class="flex-1"></div>
                <button type="button" onclick="proximaSecao()" id="btnProximo"
                        class="bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white py-3 px-6 rounded-xl font-semibold transition-all duration-300 flex items-center gap-2">
                    Pr√≥ximo <span>‚û°Ô∏è</span>
                </button>
            </div>

            <!-- Bot√µes Finais -->
            <div class="flex flex-col sm:flex-row gap-4" id="actionButtons" style="display: none;">
                <button type="submit"
                        class="flex-1 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white py-4 px-8 rounded-xl font-semibold text-lg transition-all duration-300 flex items-center justify-center gap-3 shadow-lg">
                    <span class="text-xl">üöÄ</span>
                    Criar Vaga
                </button>
                <a href="{{ url_for('dashboard_empresa') }}"
                   class="flex-1 bg-gray-500 hover:bg-gray-600 text-white py-4 px-8 rounded-xl font-semibold text-lg transition-all duration-300 text-center flex items-center justify-center gap-3 shadow-lg">
                    <span class="text-xl">‚ùå</span>
                    Cancelar
                </a>
            </div>
        </form>
    </div>
</div>

<script>
// Campos obrigat√≥rios ocultos com valores padr√£o
const camposOcultos = {
    'turno_trabalho': 'Comercial',
    'idiomas_exigidos': '',
    'disponibilidade_viagens': false,
    'data_limite_candidatura': null,
    'data_congelamento_agendado': null
};

// Adicionar campos ocultos no envio
document.querySelector('form').addEventListener('submit', function(e) {
    Object.keys(camposOcultos).forEach(campo => {
        if (!document.querySelector(`[name="${campo}"]`)) {
            const input = document.createElement('input');
            input.type = 'hidden';
            input.name = campo;
            input.value = camposOcultos[campo];
            this.appendChild(input);
        }
    });
});

function toggleEnderecoField() {
    const tipoVaga = document.getElementById('tipo_vaga').value;
    const enderecoContainer = document.getElementById('endereco_container');
    const camposEndereco = document.querySelectorAll('#campos_endereco_vaga input, #campos_endereco_vaga select');

    if (tipoVaga === 'Presencial' || tipoVaga === 'H√≠brida') {
        enderecoContainer.classList.remove('hidden');
        camposEndereco.forEach(campo => {
            campo.required = true;
        });
    } else {
        enderecoContainer.classList.add('hidden');
        camposEndereco.forEach(campo => {
            campo.required = false;
            campo.value = '';
        });
    }
}

function toggleNovaCategoria() {
    const categoriaSelect = document.getElementById('categoria_id');
    const novaContainer = document.getElementById('nova_categoria_container');
    const novaInput = document.getElementById('nova_categoria');

    if (categoriaSelect.value === 'nova') {
        novaContainer.classList.remove('hidden');
        novaInput.required = true;
        novaInput.focus();
    } else {
        novaContainer.classList.add('hidden');
        novaInput.required = false;
        novaInput.value = '';
    }
}

function toggleEnderecoEmpresa() {
    const checkbox = document.getElementById('usar_endereco_empresa');
    const camposEndereco = document.getElementById('campos_endereco_vaga');

    if (checkbox.checked) {
        fetch('/empresa/endereco')
            .then(response => response.json())
            .then(data => {
                if (data.endereco) {
                    document.getElementById('localizacao_endereco').value = data.endereco || '';
                    document.getElementById('localizacao_cidade').value = data.cidade || '';
                    document.getElementById('localizacao_estado').value = data.estado || '';
                }
            })
            .catch(error => console.error('Erro ao buscar endere√ßo:', error));

        camposEndereco.style.opacity = '0.6';
        camposEndereco.style.pointerEvents = 'none';
    } else {
        camposEndereco.style.opacity = '1';
        camposEndereco.style.pointerEvents = 'auto';
        document.getElementById('localizacao_endereco').value = '';
        document.getElementById('localizacao_cidade').value = '';
        document.getElementById('localizacao_estado').value = '';
    }
}

// Sistema de navega√ß√£o por se√ß√µes
let currentStep = 1;
const totalSteps = 3;

function mostrarSecao(step) {
    if (step < 1 || step > totalSteps) return;

    for (let i = 1; i <= totalSteps; i++) {
        const secao = document.getElementById(`secao-${i}`);
        if (secao) {
            secao.style.display = i === step ? 'block' : 'none';
        }
    }

    atualizarProgresso(step);
    atualizarNavegacao(step);
    currentStep = step;

    // Scroll suave para o topo da se√ß√£o
    window.scrollTo({top: 200, behavior: 'smooth'});
}

function atualizarProgresso(activeStep) {
    for (let i = 1; i <= totalSteps; i++) {
        const stepEl = document.getElementById(`step-${i}`);
        if (!stepEl) continue;

        const circle = stepEl.querySelector('div');
        const label = stepEl.querySelector('span');

        if (i <= activeStep) {
            if (i === 1) {
                circle.className = 'w-10 h-10 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-full flex items-center justify-center font-bold text-sm shadow-lg';
                label.className = 'ml-3 text-sm font-medium text-green-600';
            } else if (i === 2) {
                circle.className = 'w-10 h-10 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-full flex items-center justify-center font-bold text-sm shadow-lg';
                label.className = 'ml-3 text-sm font-medium text-blue-600';
            } else if (i === 3) {
                // Cor roxa para a se√ß√£o 3
                circle.className = 'w-10 h-10 bg-gradient-to-r from-purple-500 to-indigo-600 text-white rounded-full flex items-center justify-center font-bold text-sm shadow-lg';
                label.className = 'ml-3 text-sm font-medium text-purple-600';
            }
        } else {
            circle.className = 'w-10 h-10 bg-gray-300 text-gray-500 rounded-full flex items-center justify-center font-bold text-sm';
            label.className = 'ml-3 text-sm font-medium text-gray-500';
        }
    }
}


function atualizarNavegacao(step) {
    const btnAnterior = document.getElementById('btnAnterior');
    const btnProximo = document.getElementById('btnProximo');
    const actionButtons = document.getElementById('actionButtons');

    btnAnterior.style.display = step > 1 ? 'flex' : 'none';

    if (step < totalSteps) {
        btnProximo.style.display = 'flex';
        actionButtons.style.display = 'none';
    } else {
        btnProximo.style.display = 'none';
        actionButtons.style.display = 'flex';
    }
}

function proximaSecao() {
    if (currentStep < totalSteps && validarSecaoAtual()) {
        mostrarSecao(currentStep + 1);
    }
}

function secaoAnterior() {
    if (currentStep > 1) {
        mostrarSecao(currentStep - 1);
    }
}

function validarSecaoAtual() {
    const secaoAtual = document.getElementById(`secao-${currentStep}`);
    if (!secaoAtual) return true;

    const camposObrigatorios = secaoAtual.querySelectorAll('input[required], select[required], textarea[required]');

    for (let campo of camposObrigatorios) {
        if (!campo.value.trim()) {
            campo.focus();
            campo.classList.add('border-red-500');
            setTimeout(() => campo.classList.remove('border-red-500'), 3000);
            showToast('Por favor, preencha todos os campos obrigat√≥rios.', 'error');
            return false;
        }
    }

    // Valida√ß√µes espec√≠ficas
    if (currentStep === 1) {
        const tipoVaga = document.getElementById('tipo_vaga').value;

        if ((tipoVaga === 'Presencial' || tipoVaga === 'H√≠brida')) {
            const endereco = document.getElementById('localizacao_endereco').value;
            const cidade = document.getElementById('localizacao_cidade').value;
            const estado = document.getElementById('localizacao_estado').value;

            if (!endereco || !cidade || !estado) {
                showToast('Endere√ßo √© obrigat√≥rio para vagas presenciais/h√≠bridas.', 'error');
                return false;
            }
        }
    }

    if (currentStep === 3) {
        const total = parseInt(document.getElementById('total-peso').textContent);
        if (total !== 100) {
            showToast('Os pesos devem somar exatamente 100%.', 'error');
            return false;
        }
    }

    return true;
}

function showToast(message, type = 'info') {
    const toast = document.createElement('div');
    const bgColor = type === 'error' ? 'bg-red-500' : type === 'success' ? 'bg-green-500' : 'bg-blue-500';

    toast.className = `fixed bottom-4 right-4 z-50 px-6 py-4 rounded-xl shadow-lg text-white ${bgColor} transform translate-y-full transition-all duration-300`;
    toast.textContent = message;

    document.body.appendChild(toast);
    setTimeout(() => toast.classList.remove('translate-y-full'), 100);

    setTimeout(() => {
        toast.classList.add('translate-y-full');
        setTimeout(() => toast.remove(), 300);
    }, 3000);
}

// Fun√ß√µes para metodologia de score
function atualizarPeso(tipo, valor) {
    document.getElementById(`valor_${tipo}`).textContent = valor;
    calcularTotalPesos();
}

function calcularTotalPesos() {
    const pesos = ['salarial', 'requisitos', 'experiencia', 'diferenciais', 'localizacao', 'formacao'];
    let total = 0;
    
    pesos.forEach(peso => {
        total += parseInt(document.getElementById(`peso_${peso}`).value);
    });
    
    document.getElementById('total-peso').textContent = total;
    
    const statusPeso = document.getElementById('status-peso');
    const barraProgresso = document.getElementById('barra-progresso');
    
    if (total === 100) {
        statusPeso.textContent = '‚úÖ V√°lido (100%)';
        statusPeso.className = 'text-sm font-bold text-green-600';
        barraProgresso.style.width = '100%';
        barraProgresso.className = 'bg-gradient-to-r from-green-500 to-emerald-500 h-3 rounded-full transition-all duration-300';
    } else if (total < 100) {
        statusPeso.textContent = `‚ö†Ô∏è Incompleto (${total}%)`;
        statusPeso.className = 'text-sm font-bold text-yellow-600';
        barraProgresso.style.width = `${total}%`;
        barraProgresso.className = 'bg-gradient-to-r from-yellow-500 to-orange-500 h-3 rounded-full transition-all duration-300';
    } else {
        statusPeso.textContent = `‚ùå Excesso (${total}%)`;
        statusPeso.className = 'text-sm font-bold text-red-600';
        barraProgresso.style.width = '100%';
        barraProgresso.className = 'bg-gradient-to-r from-red-500 to-red-600 h-3 rounded-full transition-all duration-300';
    }
}

function aplicarTemplateScore() {
    const template = document.getElementById('template_score').value;
    const templates = {
        'equilibrado': {salarial: 20, requisitos: 40, experiencia: 15, diferenciais: 10, localizacao: 10, formacao: 5},
        'tecnico': {salarial: 10, requisitos: 50, experiencia: 25, diferenciais: 10, localizacao: 5, formacao: 0},
        'startup': {salarial: 30, requisitos: 30, experiencia: 10, diferenciais: 20, localizacao: 10, formacao: 0},
        'tradicional': {salarial: 15, requisitos: 35, experiencia: 20, diferenciais: 5, localizacao: 15, formacao: 10},
        'remoto': {salarial: 25, requisitos: 45, experiencia: 20, diferenciais: 10, localizacao: 0, formacao: 0},
        'vendas': {salarial: 25, requisitos: 25, experiencia: 20, diferenciais: 20, localizacao: 10, formacao: 0},
        'gestao': {salarial: 15, requisitos: 30, experiencia: 30, diferenciais: 15, localizacao: 5, formacao: 5}
    };
    
    if (template && templates[template]) {
        Object.keys(templates[template]).forEach(peso => {
            const input = document.getElementById(`peso_${peso}`);
            input.value = templates[template][peso];
            atualizarPeso(peso, templates[template][peso]);
        });
    }
}

function resetarPesos() {
    const pesosDefault = {salarial: 20, requisitos: 40, experiencia: 15, diferenciais: 10, localizacao: 10, formacao: 5};
    Object.keys(pesosDefault).forEach(peso => {
        const input = document.getElementById(`peso_${peso}`);
        input.value = pesosDefault[peso];
        atualizarPeso(peso, pesosDefault[peso]);
    });
    document.getElementById('template_score').value = 'equilibrado';
}

// Inicializa√ß√£o
document.addEventListener('DOMContentLoaded', function() {
    mostrarSecao(1);
});
</script>
{% endblock %}